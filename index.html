<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Device Manager</title>

<style>
*{box-sizing:border-box;font-family:Arial}
body{
  margin:0;min-height:100vh;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  display:flex;justify-content:center;align-items:center;padding:15px
}
.container{max-width:460px;width:100%}
.card{
  background:#fff;padding:22px;border-radius:16px;
  box-shadow:0 15px 40px rgba(0,0,0,.25);margin-bottom:20px
}
h2{text-align:center;color:#203a43}
input,select,button{
  width:100%;padding:12px;margin-bottom:12px;
  border-radius:8px;border:1px solid #ccc
}
.harga{background:#f1f5f9;padding:10px;border-radius:8px;text-align:center;font-weight:bold}
button{background:#2c5364;color:#fff;border:none;font-weight:bold;cursor:pointer}
button:hover{background:#203a43}
.result{white-space:pre-line;display:none;background:#eef2f7;padding:12px;border-radius:8px}
.loading{text-align:center;display:none}
#copyBtn{display:none;background:#16a34a}
</style>
</head>

<body>
<div class="container">

<div class="card">
<h2>Register Device</h2>
<input id="reg_iddevice" placeholder="ID Device">
<select id="reg_durasi">
  <option value="">Pilih Durasi</option>
  <option value="3">3 Hari</option>
  <option value="7">7 Hari</option>
  <option value="15">15 Hari</option>
</select>
<div class="harga" id="reg_harga">Harga: -</div>
<button onclick="submitData('register')">REGISTER</button>
</div>

<div class="card">
<h2>Perpanjang Durasi</h2>
<input id="ext_iddevice" placeholder="ID Device">
<select id="ext_durasi">
  <option value="">Pilih Durasi</option>
  <option value="3">+3 Hari</option>
  <option value="7">+7 Hari</option>
  <option value="15">+15 Hari</option>
</select>
<div class="harga" id="ext_harga">Harga: -</div>
<button onclick="submitData('extend')">PERPANJANG</button>
</div>

<div class="card">
<div id="loading" class="loading">‚è≥ Memproses...</div>
<div id="result" class="result"></div>
<button id="copyBtn" onclick="copyText()">üìã Salin</button>
</div>

</div>

<script>
const URL_API = "PASTE_URL_APPS_SCRIPT_MU_DISINI";
const hargaMap = {3:3000,7:5000,15:10000};

reg_durasi.onchange=()=>reg_harga.textContent=reg_durasi.value?"Harga: Rp "+hargaMap[reg_durasi.value]:"Harga: -";
ext_durasi.onchange=()=>ext_harga.textContent=ext_durasi.value?"Harga: Rp "+hargaMap[ext_durasi.value]:"Harga: -";

function submitData(type){
  let id = type==="register"?reg_iddevice.value.trim():ext_iddevice.value.trim();
  let dur = type==="register"?reg_durasi.value:ext_durasi.value;

  if(!id||!dur){alert("Lengkapi data");return}

  loading.style.display="block";
  result.style.display="none";
  copyBtn.style.display="none";

  const d = new URLSearchParams();
  d.append("action",type);
  d.append("iddevice",id);
  d.append("durasi",dur);

  fetch(URL_API,{method:"POST",body:d})
    .then(r=>r.text())
    .then(t=>{
      loading.style.display="none";
      result.style.display="block";
      result.textContent=t;
      if(t.includes("BERHASIL"))copyBtn.style.display="block";
    });
}

function copyText(){
  navigator.clipboard.writeText(result.innerText);
  alert("Disalin");
}
</script>
</body>
</html>
